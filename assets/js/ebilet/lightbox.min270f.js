+function(a){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var b=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();(function(a){var d="ekkoLightbox",e=a.fn[d],f={title:"",footer:"",showArrows:!0,type:null,alwaysShowClose:!1,loadingMessage:'<div class="ekko-lightbox-loader"><div><div></div><div></div></div></div>',leftArrow:"<span>&#10094;</span>",rightArrow:"<span>&#10095;</span>",strings:{close:"Close",fail:"Failed to load image:",type:"Could not detect remote target type. Force the type using data-type"},doc:document,onShow:function(){},onShown:function(){},onHide:function(){},onHidden:function(){},onNavigate:function(){},onContentLoaded:function(){}},g=function(){function d(b,e){var g=this;c(this,d),this._config=a.extend({},f,e),this._$modalArrows=null,this._galleryIndex=0,this._galleryName=null,this._padding=null,this._border=null,this._titleIsShown=!1,this._footerIsShown=!1,this._wantedWidth=0,this._wantedHeight=0,this._modalId="ekkoLightbox-"+Math.floor(1e3*Math.random()+1),this._$element=b instanceof jQuery?b:a(b),this._isBootstrap3=3==a.fn.modal.Constructor.VERSION[0];var h='<h4 class="modal-title">'+(this._config.title||"&nbsp;")+"</h4>",i='<button type="button" class="close" data-dismiss="modal" aria-label="'+this._config.strings.close+'"><span aria-hidden="true">&times;</span></button>',j='<div class="modal-header"'+(this._config.title||this._config.alwaysShowClose?"":' style="display:none"')+">"+(this._isBootstrap3?i+h:h+i)+"</div>",k='<div class="modal-footer"'+(this._config.footer?"":' style="display:none"')+">"+(this._config.footer||"&nbsp;")+"</div>",l='<div class="modal-body"><div class="ekko-lightbox-container"><div class="ekko-lightbox-item fade in show"></div><div class="ekko-lightbox-item fade"></div></div></div>',m='<div class="modal-dialog" role="document"><div class="modal-content">'+j+l+k+"</div></div>";a(this._config.doc.body).append('<div id="'+this._modalId+'" class="ekko-lightbox modal fade" tabindex="-1" tabindex="-1" role="dialog" aria-hidden="true">'+m+"</div>"),this._$modal=a("#"+this._modalId,this._config.doc),this._$modalDialog=this._$modal.find(".modal-dialog").first(),this._$modalContent=this._$modal.find(".modal-content").first(),this._$modalBody=this._$modal.find(".modal-body").first(),this._$modalHeader=this._$modal.find(".modal-header").first(),this._$modalFooter=this._$modal.find(".modal-footer").first(),this._$lightboxContainer=this._$modalBody.find(".ekko-lightbox-container").first(),this._$lightboxBodyOne=this._$lightboxContainer.find("> div:first-child").first(),this._$lightboxBodyTwo=this._$lightboxContainer.find("> div:last-child").first(),this._border=this._calculateBorders(),this._padding=this._calculatePadding(),this._galleryName=this._$element.data("gallery"),this._galleryName&&(this._$galleryItems=a(document.body).find('*[data-gallery="'+this._galleryName+'"]'),this._galleryIndex=this._$galleryItems.index(this._$element),a(document).on("keydown.ekkoLightbox",this._navigationalBinder.bind(this)),this._config.showArrows&&this._$galleryItems.length>1&&(this._$lightboxContainer.append('<div class="ekko-lightbox-nav-overlay"><a href="#">'+this._config.leftArrow+'</a><a href="#">'+this._config.rightArrow+"</a></div>"),this._$modalArrows=this._$lightboxContainer.find("div.ekko-lightbox-nav-overlay").first(),this._$lightboxContainer.on("click","a:first-child",function(a){return a.preventDefault(),g.navigateLeft()}),this._$lightboxContainer.on("click","a:last-child",function(a){return a.preventDefault(),g.navigateRight()}))),this._$modal.on("show.bs.modal",this._config.onShow.bind(this)).on("shown.bs.modal",function(){return g._toggleLoading(!0),g._handle(),g._config.onShown.call(g)}).on("hide.bs.modal",this._config.onHide.bind(this)).on("hidden.bs.modal",function(){return g._galleryName&&(a(document).off("keydown.ekkoLightbox"),a(window).off("resize.ekkoLightbox")),g._$modal.remove(),g._config.onHidden.call(g)}).modal(this._config),a(window).on("resize.ekkoLightbox",function(){g._resize(g._wantedWidth,g._wantedHeight)})}return b(d,null,[{key:"Default",get:function(){return f}}]),b(d,[{key:"element",value:function(){return this._$element}},{key:"modal",value:function(){return this._$modal}},{key:"navigateTo",value:function(c){return c<0||c>this._$galleryItems.length-1?this:(this._galleryIndex=c,this._$element=a(this._$galleryItems.get(this._galleryIndex)),void this._handle())}},{key:"navigateLeft",value:function(){if(1!==this._$galleryItems.length)return 0===this._galleryIndex?this._galleryIndex=this._$galleryItems.length-1:this._galleryIndex--,this._config.onNavigate.call(this,"left",this._galleryIndex),this.navigateTo(this._galleryIndex)}},{key:"navigateRight",value:function(){if(1!==this._$galleryItems.length)return this._galleryIndex===this._$galleryItems.length-1?this._galleryIndex=0:this._galleryIndex++,this._config.onNavigate.call(this,"right",this._galleryIndex),this.navigateTo(this._galleryIndex)}},{key:"close",value:function(){return this._$modal.modal("hide")}},{key:"_navigationalBinder",value:function(b){return b=b||window.event,39===b.keyCode?this.navigateRight():37===b.keyCode?this.navigateLeft():void 0}},{key:"_detectRemoteType",value:function(b,c){return c=c||!1,!c&&this._isImage(b)&&(c="image"),!c&&this._getYoutubeId(b)&&(c="youtube"),!c&&this._getVimeoId(b)&&(c="vimeo"),!c&&this._getInstagramId(b)&&(c="instagram"),(!c||["image","youtube","vimeo","instagram","video","url"].indexOf(c)<0)&&(c="url"),c}},{key:"_isImage",value:function(b){return b&&b.match(/(^data:image\/.*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg)((\?|#).*)?$)/i)}},{key:"_containerToUse",value:function(){var b=this,c=this._$lightboxBodyTwo,d=this._$lightboxBodyOne;return this._$lightboxBodyTwo.hasClass("in")&&(c=this._$lightboxBodyOne,d=this._$lightboxBodyTwo),d.removeClass("in show"),setTimeout(function(){b._$lightboxBodyTwo.hasClass("in")||b._$lightboxBodyTwo.empty(),b._$lightboxBodyOne.hasClass("in")||b._$lightboxBodyOne.empty()},500),c.addClass("in show"),c}},{key:"_handle",value:function(){var b=this._containerToUse();this._updateTitleAndFooter();var c=this._$element.attr("data-remote")||this._$element.attr("href"),d=this._detectRemoteType(c,this._$element.attr("data-type")||!1);if(["image","youtube","vimeo","instagram","video","url"].indexOf(d)<0)return this._error(this._config.strings.type);switch(d){case"image":this._preloadImage(c,b),this._preloadImageByIndex(this._galleryIndex,3);break;case"youtube":this._showYoutubeVideo(c,b);break;case"vimeo":this._showVimeoVideo(this._getVimeoId(c),b);break;case"instagram":this._showInstagramVideo(this._getInstagramId(c),b);break;case"video":this._showHtml5Video(c,b);break;default:this._loadRemoteContent(c,b)}return this}},{key:"_getYoutubeId",value:function(b){if(!b)return!1;var c=b.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/);return!(!c||11!==c[2].length)&&c[2]}},{key:"_getVimeoId",value:function(b){return!!(b&&b.indexOf("vimeo")>0)&&b}},{key:"_getInstagramId",value:function(b){return!!(b&&b.indexOf("instagram")>0)&&b}},{key:"_toggleLoading",value:function(c){return c=c||!1,c?(this._$modalDialog.css("display","none"),this._$modal.removeClass("in show"),a(".modal-backdrop").append(this._config.loadingMessage)):(this._$modalDialog.css("display","block"),this._$modal.addClass("in show"),a(".modal-backdrop").find(".ekko-lightbox-loader").remove()),this}},{key:"_calculateBorders",value:function(){return{top:this._totalCssByAttribute("border-top-width"),right:this._totalCssByAttribute("border-right-width"),bottom:this._totalCssByAttribute("border-bottom-width"),left:this._totalCssByAttribute("border-left-width")}}},{key:"_calculatePadding",value:function(){return{top:this._totalCssByAttribute("padding-top"),right:this._totalCssByAttribute("padding-right"),bottom:this._totalCssByAttribute("padding-bottom"),left:this._totalCssByAttribute("padding-left")}}},{key:"_totalCssByAttribute",value:function(b){return parseInt(this._$modalDialog.css(b),10)+parseInt(this._$modalContent.css(b),10)+parseInt(this._$modalBody.css(b),10)}},{key:"_updateTitleAndFooter",value:function(){var b=this._$element.data("title")||"",c=this._$element.data("footer")||"";return this._titleIsShown=!1,b||this._config.alwaysShowClose?(this._titleIsShown=!0,this._$modalHeader.css("display","").find(".modal-title").html(b||"&nbsp;")):this._$modalHeader.css("display","none"),this._footerIsShown=!1,c?(this._footerIsShown=!0,this._$modalFooter.css("display","").html(c)):this._$modalFooter.css("display","none"),this}},{key:"_showYoutubeVideo",value:function(b,c){var d=this._getYoutubeId(b),e=b.indexOf("&")>0?b.substr(b.indexOf("&")):"",f=this._$element.data("width")||560,g=this._$element.data("height")||f/(560/315);return this._showVideoIframe("//www.youtube.com/embed/"+d+"?badge=0&autoplay=1&html5=1"+e,f,g,c)}},{key:"_showVimeoVideo",value:function(b,c){var d=500,e=this._$element.data("height")||d/(560/315);return this._showVideoIframe(b+"?autoplay=1",d,e,c)}},{key:"_showInstagramVideo",value:function(b,c){var d=this._$element.data("width")||612,e=d+80;return b="/"!==b.substr(-1)?b+"/":b,c.html('<iframe width="'+d+'" height="'+e+'" src="'+b+'embed/" frameborder="0" allowfullscreen></iframe>'),this._resize(d,e),this._config.onContentLoaded.call(this),this._$modalArrows&&this._$modalArrows.css("display","none"),this._toggleLoading(!1),this}},{key:"_showVideoIframe",value:function(b,c,d,e){return d=d||c,e.html('<div class="embed-responsive embed-responsive-16by9"><iframe width="'+c+'" height="'+d+'" src="'+b+'" frameborder="0" allowfullscreen class="embed-responsive-item"></iframe></div>'),this._resize(c,d),this._config.onContentLoaded.call(this),this._$modalArrows&&this._$modalArrows.css("display","none"),this._toggleLoading(!1),this}},{key:"_showHtml5Video",value:function(b,c){var d=this._$element.data("width")||560,e=this._$element.data("height")||d/(560/315);return c.html('<div class="embed-responsive embed-responsive-16by9"><video width="'+d+'" height="'+e+'" src="'+b+'" preload="auto" autoplay controls class="embed-responsive-item"></video></div>'),this._resize(d,e),this._config.onContentLoaded.call(this),this._$modalArrows&&this._$modalArrows.css("display","none"),this._toggleLoading(!1),this}},{key:"_loadRemoteContent",value:function(c,d){var e=this,f=this._$element.data("width")||560,g=this._$element.data("height")||560,h=this._$element.data("disableExternalCheck")||!1;return this._toggleLoading(!1),h||this._isExternal(c)?(d.html('<iframe src="'+c+'" frameborder="0" allowfullscreen></iframe>'),this._config.onContentLoaded.call(this)):d.load(c,a.proxy(function(){return e._$element.trigger("loaded.bs.modal")})),this._$modalArrows&&this._$modalArrows.css("display","none"),this._resize(f,g),this}},{key:"_isExternal",value:function(b){var c=b.match(/^([^:\/?#]+:)?(?:\/\/([^\/?#]*))?([^?#]+)?(\?[^#]*)?(#.*)?/);return"string"==typeof c[1]&&c[1].length>0&&c[1].toLowerCase()!==location.protocol||"string"==typeof c[2]&&c[2].length>0&&c[2].replace(new RegExp(":("+{"http:":80,"https:":443}[location.protocol]+")?$"),"")!==location.host}},{key:"_error",value:function(b){return console.error(b),this._containerToUse().html(b),this._resize(300,300),this}},{key:"_preloadImageByIndex",value:function(c,d){if(this._$galleryItems){var e=a(this._$galleryItems.get(c),!1);if("undefined"!=typeof e){var f=e.attr("data-remote")||e.attr("href");return("image"===e.attr("data-type")||this._isImage(f))&&this._preloadImage(f,!1),d>0?this._preloadImageByIndex(c+1,d-1):void 0}}}},{key:"_preloadImage",value:function(c,d){var e=this;d=d||!1;var f=new Image;return d&&!function(){var b=setTimeout(function(){d.append(e._config.loadingMessage)},200);f.onload=function(){b&&clearTimeout(b),b=null;var c=a("<img />");return c.attr("src",f.src),c.addClass("img-fluid"),c.css("width","100%"),d.html(c),e._$modalArrows&&e._$modalArrows.css("display",""),e._resize(f.width,f.height),e._toggleLoading(!1),e._config.onContentLoaded.call(e)},f.onerror=function(){return e._toggleLoading(!1),e._error(e._config.strings.fail+("  "+c))}}(),f.src=c,f}},{key:"_resize",value:function(c,d){d=d||c,this._wantedWidth=c,this._wantedHeight=d;var e=this._padding.left+this._padding.right+this._border.left+this._border.right,f=Math.min(c+e,this._config.doc.body.clientWidth);c+e>f?(d*=(f-e)/c,c=f):c+=e;var g=0,h=0;this._footerIsShown&&(h=this._$modalFooter.outerHeight(!0)||55),this._titleIsShown&&(g=this._$modalHeader.outerHeight(!0)||67);var i=this._padding.top+this._padding.bottom+this._border.bottom+this._border.top,j=parseFloat(this._$modalDialog.css("margin-top"))+parseFloat(this._$modalDialog.css("margin-bottom")),k=Math.min(d,a(window).height()-i-j-g-h);if(d>k){var l=Math.min(k/d,1);c=Math.ceil(l*c)}if(this._$lightboxContainer.css("height",k),this._$modalDialog.css("width","auto").css("maxWidth",c),this._isBootstrap3){var m=this._$modal.data("bs.modal");m&&m.handleUpdate()}else{var m=this._$modal.data("bs.modal");m&&m._handleUpdate()}return this}}],[{key:"_jQueryInterface",value:function(c){var e=this;return c=c||{},this.each(function(){var b=a(e),f=a.extend({},d.Default,b.data(),"object"==typeof c&&c);new d(e,f)})}}]),d}();return a.fn[d]=g._jQueryInterface,a.fn[d].Constructor=g,a.fn[d].noConflict=function(){return a.fn[d]=e,g._jQueryInterface},g})(jQuery)}(jQuery);